import{r as i,c as t,h as s,H as o,g as r}from"./p-797021b3.js";import{a as n,c as a,o as d,f as e}from"./p-19ba150b.js";import"./p-3d035636.js";import{r as h,o as c}from"./p-bcc2e44c.js";import{u as l}from"./p-fa247fce.js";import{d as p}from"./p-a96db818.js";const f="go-dropdown{--dropdown-shadow:var(--shadow-3);--dropdown-bg-color:var(--go-color-lightest);--dropdown-duration:var(--go-duration-fast);--dropdown-radius:var(--radius-2);position:fixed;display:none;visibility:hidden;opacity:0;box-shadow:var(--dropdown-shadow);pointer-events:none;z-index:1;transform:translateY(-0.3125rem);transform-origin:top;width:var(--dropdown-width, 200px);background-color:var(--dropdown-bg-color);border-radius:var(--dropdown-radius);transition:opacity var(--dropdown-duration) var(--go-timing-function), visibility var(--go-duration-normal) var(--go-timing-function), transform var(--dropdown-duration) var(--go-timing-function)}@media (prefers-reduced-motion: reduce){go-dropdown{transition-duration:0s}}go-dropdown.full-width{--dropdown-width:100%}go-dropdown.flip{transform-origin:bottom;transform:translateY(0.3125rem)}go-dropdown.is-active{visibility:visible;opacity:1;pointer-events:inherit;transform:translateY(0)}";const u=class{constructor(s){i(this,s);this.opened=t(this,"opened",7);this.closed=t(this,"closed",7);this.triggerSelector=undefined;this.isActive=false;this.width="auto";this.noTriggerClickHandler=false;this.fullWidth=false;this.disabled=false}async open(){if(this.disabled){return}this.originEl=document.activeElement;this.isActive=true;this.opened.emit()}async close(i=false){this.isActive=false;this.closed.emit();if(this.originEl&&i){this.originEl.focus()}}async toggle(){if(this.isActive){this.close()}else{this.open()}}componentWillLoad(){if(!this.el.id){this.el.id=l("go-dropdown-")}this.triggerEl=document.querySelector(`${this.triggerSelector}`)}async componentDidLoad(){if(!this.triggerEl){return}await this.init();this.escapeHandler=i=>{if(i.code==="Escape"){this.close()}};this.focusOutHandler=i=>{if(this.triggerEl.contains(i.relatedTarget)){return}if(i.relatedTarget&&!this.el.contains(i.relatedTarget)){this.close()}};document.addEventListener("keydown",this.escapeHandler);this.el.addEventListener("focusout",this.focusOutHandler)}disconnectedCallback(){if(this.escapeHandler){document.removeEventListener("keydown",this.escapeHandler)}if(this.focusOutHandler){this.el.removeEventListener("focusout",this.focusOutHandler)}if(this.clickOutHandler){h(this.clickOutHandler)}if(this.cleanupAutoUpdate){this.cleanupAutoUpdate()}}async init(){this.triggerEl.setAttribute("aria-haspopup","true");this.setTriggerExpanded(this.isActive);if(!this.noTriggerClickHandler){this.triggerEl.addEventListener("click",(()=>this.toggle()))}this.clickOutHandler=c(this.el,(i=>{if(!this.triggerEl.contains(i.target)&&this.isActive){this.close()}}));const i=[d(4),e()];this.cleanupAutoUpdate=n(this.triggerEl,this.el,p((()=>{a(this.triggerEl,this.el,{strategy:"fixed",placement:"bottom-start",middleware:i}).then((({x:i,y:t,middlewareData:s})=>{var o,r;Object.assign(this.el.style,{left:`${i}px`,top:`${t}px`});if(((r=(o=s.flip)===null||o===void 0?void 0:o.overflows)===null||r===void 0?void 0:r.length)>0){this.el.classList.add("flip")}else{this.el.classList.remove("flip")}}))}),50))}setTriggerExpanded(i){this.triggerEl.setAttribute("aria-expanded",String(i))}handleActiveChange(i){this.setTriggerExpanded(i);if(i){this.el.style.display="block"}else{this.el.addEventListener("transitionend",(()=>{this.el.style.display="none"}),{once:true});this.triggerEl.focus()}}render(){let{isActive:i,width:t,fullWidth:r}=this;return s(o,{class:{"is-active":i,"full-width":r},"aria-hidden":i?"false":"true",style:{"--dropdown-width":t}},s("div",{class:"dropdown-content"},s("slot",null)))}get el(){return r(this)}static get watchers(){return{isActive:["handleActiveChange"]}}};u.style=f;export{u as go_dropdown};
//# sourceMappingURL=p-adca6d15.entry.js.map
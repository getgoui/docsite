{"version":3,"names":["goButtonCss","GoButton","this","nativeEl","componentWillLoad","icon","root","hasAttribute","warning","block","handleBlockChange","updateInnerButtonAttributes","observer","MutationObserver","mutations","forEach","mutation","type","observe","attributes","inheritedAttributes","Object","assign","$attrs","bind","blockClasses","render","disabled","variant","outline","outlineFill","href","loading","loadingAnouncement","Tag","rootClasses","h","Host","class","ref","el","loadingAnnouncement","name","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","hasPassiveEvents","window","passiveTestOptions","passive","undefined","addEventListener","removeEventListener","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPosition","previousBodyPaddingRight","allowTouchMove","some","lock","options","preventDefault","rawEvent","e","event","target","touches","setOverflowHidden","_reserveScrollBarGap","reserveScrollBarGap","scrollBarGap","innerWidth","document","documentElement","clientWidth","computedBodyPaddingRight","parseInt","getComputedStyle","body","getPropertyValue","style","paddingRight","overflow","restoreOverflowSetting","setPositionFixed","requestAnimationFrame","position","top","left","_window","scrollY","scrollX","innerHeight","setTimeout","bottomBarHeight","restorePositionSetting","y","x","scrollTo","isTargetElementTotallyScrolled","targetElement","scrollHeight","scrollTop","clientHeight","handleScroll","clientY","targetTouches","stopPropagation","disableBodyScroll","console","error","concat","ontouchstart","ontouchmove","enableBodyScroll","filter","goOverlayCss","GoOverlay","inheritedAttrs","inheritAttributes","querySelector","appendChild","componentDidLoad","persistent","active","bgEl","close","closeEvent","emit","_a","originator","focus","visibility","open","activeElement","openEvent","code","trapFocus","watchActiveHandler","newValue"],"sources":["src/components/go-button/go-button.scss?tag=go-button","src/components/go-button/go-button.tsx","../../node_modules/.pnpm/body-scroll-lock@4.0.0-beta.0/node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js","src/components/go-overlay/go-overlay.scss?tag=go-overlay","src/components/go-overlay/go-overlay.tsx"],"sourcesContent":["go-button {\r\n  // default colours\r\n\r\n  /**\r\n    @prop --go-btn-bg-color:\r\n      Background colour for the button.\r\n      - default: var(--go-color-neutral-600)\r\n  */\r\n  --go-btn-bg-color: var(--go-color-neutral-600);\r\n\r\n  --go-btn-bg-color-hover: var(--go-color-neutral-500);\r\n  --go-btn-text-color: #fff;\r\n  --go-btn-text-color-hover: #fff;\r\n  --go-focus-outline-color: var(--go-btn-bg-color);\r\n  --go-btn-outline-text-color: #000;\r\n  --go-btn-outline-text-color-hover: #000;\r\n  --go-btn-disabled-opacity: 0.5;\r\n\r\n  // shadow\r\n  --go-btn-shadow: var(--shadow-2);\r\n\r\n  // default sizing\r\n  --go-btn-padding-y: 0.5em;\r\n  --go-btn-padding-x: 1.5em;\r\n  --go-btn-inner-gap: 0.5rem;\r\n  --go-btn-radius: var(--radius-2, 0.25rem);\r\n\r\n  /**\r\n    @prop --go-btn-icon-size:\r\n      Outer size of the icon button.\r\n      - default: 3rem\r\n  */\r\n  --go-btn-icon-size: 3rem;\r\n\r\n  /**\r\n    @prop --go-btn-inline-icon-size:\r\n      Size of the icon inside the button.\r\n      - default: calc(var(--go-btn-icon-size) / 2)\r\n  */\r\n  --go-btn-inline-icon-size: calc(var(--go-btn-icon-size) / 2);\r\n\r\n  // outline fill color\r\n  --go-btn-outline-fill-color: var(--go-color-bg);\r\n\r\n  /**\r\n    @prop --go-btn-border-width:\r\n      Width of button border\r\n      - default: 2px\r\n  */\r\n  --go-btn-border-width: 2px;\r\n\r\n  display: inline-block;\r\n\r\n  &.block-all {\r\n    display: block;\r\n    width: 100%;\r\n  }\r\n\r\n  &.block-desktop {\r\n    display: block;\r\n    width: 100%;\r\n    @include min-query(large) {\r\n      display: inline-block;\r\n      width: auto;\r\n    }\r\n  }\r\n  &.block-tablet {\r\n    display: block;\r\n    width: 100%;\r\n    @include min-query(desktop) {\r\n      display: inline-block;\r\n      width: auto;\r\n    }\r\n  }\r\n  &.block-mobile {\r\n    display: block;\r\n    width: 100%;\r\n    @include min-query(tablet) {\r\n      display: inline-block;\r\n      width: auto;\r\n    }\r\n  }\r\n\r\n  &.outline {\r\n    .inner-button {\r\n      background: transparent;\r\n      border-color: var(--go-btn-bg-color);\r\n      color: var(--go-btn-outline-text-color);\r\n      &:hover,\r\n      &:focus-visible {\r\n        background: var(--go-btn-bg-color);\r\n        color: var(--go-btn-outline-text-color-hover);\r\n      }\r\n    }\r\n    &[variant='text'] {\r\n      --go-btn-bg-color: var(--go-color-neutral-700);\r\n      .inner-button {\r\n        border-color: transparent;\r\n      }\r\n    }\r\n  }\r\n\r\n  &.outline-fill {\r\n    .inner-button {\r\n      background: var(--go-btn-outline-fill-color);\r\n    }\r\n  }\r\n\r\n  &[flat] {\r\n    .inner-button {\r\n      box-shadow: none;\r\n      &:hover,\r\n      &:focus-visible {\r\n        box-shadow: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  &[round] {\r\n    .inner-button {\r\n      border-radius: var(--radius-round);\r\n    }\r\n  }\r\n\r\n  &[icon] {\r\n    .inner-button {\r\n      width: var(--go-btn-icon-size);\r\n      height: var(--go-btn-icon-size);\r\n      padding: 0;\r\n      text-align: center;\r\n    }\r\n  }\r\n\r\n  &[stack] {\r\n    .inner-button {\r\n      flex-direction: column;\r\n    }\r\n  }\r\n\r\n  &[compact] {\r\n    --go-btn-padding-y: 0.25em;\r\n    --go-btn-padding-x: 0.5em;\r\n    --go-btn-inner-gap: 0.125em;\r\n    --go-btn-icon-size: 2rem;\r\n    .inner-button {\r\n      font-size: var(--go-size--1);\r\n      line-height: 1.5em;\r\n    }\r\n  }\r\n\r\n  &[disabled] {\r\n    .inner-button {\r\n      /* stylelint-disable-next-line plugin/no-unsupported-browser-features */\r\n      cursor: not-allowed;\r\n      box-shadow: none;\r\n      opacity: var(--go-btn-disabled-opacity);\r\n      &:hover,\r\n      &:focus {\r\n        box-shadow: none;\r\n        outline: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  .inner-button {\r\n    // reset button style\r\n    @include reset-btn;\r\n\r\n    display: inline-flex;\r\n    vertical-align: middle;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: var(--go-btn-inner-gap);\r\n    width: 100%;\r\n    text-align: center;\r\n    line-height: 1.5;\r\n    background: var(--go-btn-bg-color);\r\n    color: var(--go-btn-text-color);\r\n    border: var(--go-btn-border-width) solid transparent;\r\n    border-radius: var(--go-btn-radius);\r\n    padding: var(--go-btn-padding-y, 0.5rem) var(--go-btn-padding-x, 1rem);\r\n    box-shadow: var(--go-btn-shadow);\r\n    text-underline-offset: 4px; // optimise for browsers that support it\r\n    font-weight: 400;\r\n    @include clickable;\r\n\r\n    &:hover,\r\n    &:focus-visible {\r\n      --go-btn-bg-color: var(--go-btn-bg-color-hover);\r\n      --go-btn-text-color: var(--go-btn-text-color-hover);\r\n    }\r\n\r\n    svg {\r\n      width: var(--go-btn-inline-icon-size);\r\n      height: var(--go-btn-inline-icon-size);\r\n      margin: 0;\r\n    }\r\n  }\r\n\r\n  &[variant='text'] {\r\n    --go-focus-outline-color: var(--go-color-primary-600);\r\n    --go-btn-bg-color: transparent;\r\n    --go-btn-bg-color-hover: var(--go-color-neutral-300);\r\n    --go-btn-text-color: currentColor;\r\n    --go-btn-text-color-hover: currentColor;\r\n    .btn-text {\r\n      text-decoration: underline;\r\n    }\r\n    \r\n    &:hover,\r\n    &:focus-within {\r\n      .btn-text {\r\n        text-decoration: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@mixin btn-light-overrides {\r\n  go-button {\r\n    // Colour variants\r\n    --go-btn-bg-color: var(--go-color-neutral-600);\r\n    --go-btn-bg-color-hover: var(--go-color-neutral-500);\r\n    &[variant='primary'] {\r\n      --go-btn-bg-color: var(--go-color-primary-600);\r\n      --go-btn-bg-color-hover: var(--go-color-primary-500);\r\n    }\r\n    &[variant='secondary'] {\r\n      --go-btn-bg-color: var(--go-color-secondary-600);\r\n      --go-btn-bg-color-hover: var(--go-color-secondary-500);\r\n    }\r\n    &[variant='success'] {\r\n      --go-btn-bg-color: var(--go-color-success-600);\r\n      --go-btn-bg-color-hover: var(--go-color-success-500);\r\n    }\r\n    &[variant='critical'] {\r\n      --go-btn-bg-color: var(--go-color-critical-600);\r\n      --go-btn-bg-color-hover: var(--go-color-critical-500);\r\n    }\r\n    &.outline {\r\n      --go-btn-outline-text-color: var(--go-btn-bg-color);\r\n      --go-btn-outline-text-color-hover: var(--go-color-lightest);\r\n    }\r\n  }\r\n}\r\n@mixin btn-dark-overrides {\r\n  go-button {\r\n    // Colour variants\r\n    --go-btn-bg-color: var(--go-color-neutral-400);\r\n    --go-btn-bg-color-hover: var(--go-color-neutral-500);\r\n    &[variant='primary'] {\r\n      --go-btn-bg-color: var(--go-color-primary-400);\r\n      --go-btn-bg-color-hover: var(--go-color-primary-500);\r\n    }\r\n    &[variant='secondary'] {\r\n      --go-btn-bg-color: var(--go-color-secondary-400);\r\n      --go-btn-bg-color-hover: var(--go-color-secondary-500);\r\n    }\r\n    &[variant='success'] {\r\n      --go-btn-bg-color: var(--go-color-success-400);\r\n      --go-btn-bg-color-hover: var(--go-color-success-500);\r\n    }\r\n    &[variant='critical'] {\r\n      --go-btn-bg-color: var(--go-color-critical-400);\r\n      --go-btn-bg-color-hover: var(--go-color-critical-500);\r\n    }\r\n    &.outline {\r\n      --go-btn-outline-text-color: var(--go-color-darkest);\r\n      --go-btn-outline-text-color-hover: var(--go-color-darkest);\r\n    }\r\n  }\r\n}\r\n\r\n// defualt light\r\n// mq prefer light\r\n// mq prefer dark\r\n// light theme\r\n// dark theme\r\n\r\n@include prefer-light {\r\n  @include btn-light-overrides;\r\n}\r\n@include prefer-dark {\r\n  @include btn-dark-overrides;\r\n}\r\n@include theme-light {\r\n  @include btn-light-overrides;\r\n}\r\n@include theme-dark {\r\n  @include btn-dark-overrides;\r\n}\r\n","import { Component, h, Prop, Element, Host, Watch, State, Build } from '@stencil/core';\r\nimport { Breakpoints, ColorVariants } from '../../interfaces';\r\nimport { $attrs, warning } from '../../utils/helper';\r\n\r\n/**\r\n * @slot default - Button text\r\n * @slot prefix - Use this slot to prepend content to the button.\r\n * @slot suffix - Use this slot to append content to the button.\r\n */\r\n@Component({\r\n  tag: 'go-button',\r\n  styleUrl: 'go-button.scss',\r\n  shadow: false,\r\n})\r\nexport class GoButton {\r\n  @Element() root: HTMLElement;\r\n\r\n  /**\r\n   * Html type of the button\r\n   */\r\n  @Prop() type: 'submit' | 'reset' | 'button' = 'button';\r\n\r\n  /**\r\n   * If this button is disabled\r\n   */\r\n  @Prop({ reflect: true }) disabled?: boolean = null;\r\n\r\n  /**\r\n   * Button variants\r\n   */\r\n  @Prop({ reflect: true }) variant?: ColorVariants | 'text' = 'neutral';\r\n\r\n  /**\r\n   * If set, the button will take up the full width of its parent\r\n   * If block=\"{breakpoint}\" is set, the button will take up the full width for the specified breakpoint. e.g. a `block=\"mobile\"` button will display full width on mobile devices.\r\n   * If block=\"all\", the button will take full width on all devices.\r\n   */\r\n  @Prop({ reflect: true }) block?: Breakpoints;\r\n\r\n  /**\r\n   * If `outline` is true, the button will have a border based on selected variant\r\n   * @see `variant` property\r\n   */\r\n  @Prop({ reflect: true }) outline?: boolean = false;\r\n\r\n  /**\r\n   * Outline style with filled background\r\n   */\r\n  @Prop({ reflect: true }) outlineFill?: boolean = false;\r\n\r\n  /**\r\n   * If `flat` is set, the button will have no shadow and will be filled with the background color of the selected variant\r\n   */\r\n  @Prop({ reflect: true }) flat?: boolean = false;\r\n\r\n  /**\r\n   * If button should have pill-shaped corners\r\n   */\r\n  @Prop({ reflect: true }) round?: boolean = false;\r\n\r\n  /**\r\n   * Circle shaped icon only button that has min size of 40px for touch devices\r\n   */\r\n  @Prop({ reflect: true }) icon?: boolean = false;\r\n\r\n  /**\r\n   * Stack elements inside the button\r\n   */\r\n  @Prop({ reflect: true }) stack?: boolean = false;\r\n\r\n  /**\r\n   * Reduce inner gaps and outer paddings\r\n   */\r\n  @Prop({ reflect: true }) compact?: boolean = false;\r\n\r\n  /**\r\n   * If the button has an href, it will be rendered as an anchor tag\r\n   */\r\n  @Prop() href?: string;\r\n\r\n  /**\r\n   * If the button is loading\r\n   */\r\n  @Prop() loading: boolean = false;\r\n\r\n  /**\r\n   * Screen reader announcement for loading state\r\n   */\r\n  @Prop() loadingAnouncement?: string = 'Loading';\r\n\r\n  @State() blockClasses: string;\r\n\r\n  @State() inheritedAttributes = {} as any;\r\n\r\n  public nativeEl: HTMLElement = null;\r\n\r\n  componentWillLoad() {\r\n    // a11y check\r\n    if (this.icon) {\r\n      if (!this.root.hasAttribute('aria-label') && !this.root.hasAttribute('aria-labelledby')) {\r\n        warning(`go-button with icon must have either aria-label or aria-labelledby attribute`, this.root);\r\n      }\r\n    }\r\n\r\n    if (this.block) {\r\n      this.handleBlockChange(this.block);\r\n    }\r\n    this.updateInnerButtonAttributes();\r\n\r\n    if (Build.isBrowser) {\r\n      // watch attribute change in case they're modified by after initial load\r\n      const observer = new MutationObserver((mutations) => {\r\n        mutations.forEach((mutation) => {\r\n          if (mutation.type === 'attributes') {\r\n            this.updateInnerButtonAttributes();\r\n          }\r\n        });\r\n      });\r\n      observer.observe(this.root, {\r\n        attributes: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  updateInnerButtonAttributes() {\r\n    this.inheritedAttributes = {\r\n      ...this.inheritedAttributes,\r\n      ...$attrs.bind(this)(true),\r\n    };\r\n  }\r\n\r\n  @Watch('block')\r\n  handleBlockChange(block: Breakpoints) {\r\n    this.blockClasses = typeof block !== 'undefined' ? `block-${block}` : '';\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      type,\r\n      disabled,\r\n      variant,\r\n      blockClasses,\r\n      outline,\r\n      outlineFill,\r\n      inheritedAttributes,\r\n      href,\r\n      loading,\r\n      loadingAnouncement,\r\n    } = this;\r\n    const Tag = href ? 'a' : 'button';\r\n    const rootClasses = `${variant} ${blockClasses}`;\r\n    return (\r\n      <Host\r\n        class={{\r\n          [rootClasses]: true,\r\n          outline,\r\n          'outline outline-fill': outlineFill,\r\n        }}>\r\n        <Tag\r\n          ref={(el) => {\r\n            this.nativeEl = el;\r\n          }}\r\n          href={href ? href : null}\r\n          type={href ? null : type}\r\n          aria-disabled={disabled ? 'true' : null}\r\n          disabled={disabled ? 'true' : null}\r\n          class=\"inner-button\"\r\n          aria-busy={loading ? 'true' : null}\r\n          {...inheritedAttributes}>\r\n          <go-spinner loading={loading} loadingAnnouncement={loadingAnouncement}></go-spinner>\r\n          <slot name=\"prefix\"></slot>\r\n          <span class=\"btn-text\">\r\n            <slot></slot>\r\n          </span>\r\n          <slot name=\"suffix\"></slot>\r\n        </Tag>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n\n\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPosition = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n\n    return false;\n  });\n};\n\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n\n  if (e.preventDefault) e.preventDefault();\n\n  return false;\n};\n\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n\n    if (_reserveScrollBarGap && scrollBarGap > 0) {\n      var computedBodyPaddingRight = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right'), 10);\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = computedBodyPaddingRight + scrollBarGap + 'px';\n    }\n  }\n\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\n\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined;\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined;\n  }\n};\n\nvar setPositionFixed = function setPositionFixed() {\n  return window.requestAnimationFrame(function () {\n    // If previousBodyPosition is already set, don't set it again.\n    if (previousBodyPosition === undefined) {\n      previousBodyPosition = {\n        position: document.body.style.position,\n        top: document.body.style.top,\n        left: document.body.style.left\n      };\n\n      // Update the dom inside an animation frame \n      var _window = window,\n          scrollY = _window.scrollY,\n          scrollX = _window.scrollX,\n          innerHeight = _window.innerHeight;\n\n      document.body.style.position = 'fixed';\n      document.body.style.top = -scrollY;\n      document.body.style.left = -scrollX;\n\n      setTimeout(function () {\n        return window.requestAnimationFrame(function () {\n          // Attempt to check if the bottom bar appeared due to the position change\n          var bottomBarHeight = innerHeight - window.innerHeight;\n          if (bottomBarHeight && scrollY >= innerHeight) {\n            // Move the content further up so that the bottom bar doesn't hide it\n            document.body.style.top = -(scrollY + bottomBarHeight);\n          }\n        });\n      }, 300);\n    }\n  });\n};\n\nvar restorePositionSetting = function restorePositionSetting() {\n  if (previousBodyPosition !== undefined) {\n    // Convert the position from \"px\" to Int\n    var y = -parseInt(document.body.style.top, 10);\n    var x = -parseInt(document.body.style.left, 10);\n\n    // Restore styles\n    document.body.style.position = previousBodyPosition.position;\n    document.body.style.top = previousBodyPosition.top;\n    document.body.style.left = previousBodyPosition.left;\n\n    // Restore scroll\n    window.scrollTo(x, y);\n\n    previousBodyPosition = undefined;\n  }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\n\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n\n  event.stopPropagation();\n  return true;\n};\n\nexport var disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n\n  if (isIosDevice) {\n    setPositionFixed();\n  } else {\n    setOverflowHidden(options);\n  }\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement);\n      }\n    };\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = true;\n    }\n  }\n};\n\nexport var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  }\n\n  if (isIosDevice) {\n    restorePositionSetting();\n  } else {\n    restoreOverflowSetting();\n  }\n\n  locks = [];\n};\n\nexport var enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n    return;\n  }\n\n  locks = locks.filter(function (lock) {\n    return lock.targetElement !== targetElement;\n  });\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n  }\n\n  if (isIosDevice) {\n    restorePositionSetting();\n  } else {\n    restoreOverflowSetting();\n  }\n};\n\n","go-overlay {\r\n  --go-overlay-color: rgba(var(--go-token-darkest), 0.8);\r\n  --go-overlay-close-btn-text-color: var(--go-color-lightest);\r\n\r\n  @include transition(opacity);\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  width: 0;\r\n  height: 0;\r\n  overflow: auto;\r\n  opacity: 0;\r\n  z-index: var(--layer-important);\r\n  .close-btn-wrapper {\r\n    go-button {\r\n      --go-btn-text-color: var(--go-overlay-close-btn-text-color);\r\n    }\r\n  }\r\n  .overlay-bg {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n  }\r\n  .overlay-content {\r\n    position: relative;\r\n    visibility: hidden;\r\n  }\r\n  &.active {\r\n    background: var(--go-overlay-color);\r\n    width: 100%;\r\n    height: 100%;\r\n    opacity: 1;\r\n    .overlay-content {\r\n      visibility: visible;\r\n    }\r\n  }\r\n}\r\n\r\n@include theme-dark {\r\n  go-overlay {\r\n    --go-overlay-color: rgba(var(--go-token-darkest), 0.8);\r\n    --go-overlay-close-btn-text-color: var(--go-text-color);\r\n  }\r\n}\r\n","import { Component, Host, h, Element, Prop, Method, Event, EventEmitter, Watch } from '@stencil/core';\r\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\r\nimport { inheritAttributes } from '../../utils/helper';\r\nimport { trapFocus } from '../../utils';\r\n\r\n@Component({\r\n  tag: 'go-overlay',\r\n  styleUrl: 'go-overlay.scss',\r\n  shadow: false,\r\n})\r\nexport class GoOverlay {\r\n  @Element() el: HTMLElement;\r\n\r\n  @Prop({ reflect: true, mutable: true }) active: boolean = false;\r\n\r\n  /**\r\n   * If persistent, the overlay will not be closed when the user clicks outside of it or presses the escape key.\r\n   */\r\n  @Prop() persistent: boolean = false;\r\n\r\n  // keep track of the element that triggered the overlay\r\n  originator: HTMLElement;\r\n\r\n  // for detecting click outside\r\n  bgEl: HTMLElement;\r\n\r\n  // Store attributes inherited from the host element\r\n  private inheritedAttrs = {};\r\n  componentWillLoad() {\r\n    this.inheritedAttrs = inheritAttributes(this.el, ['class', 'style'], false);\r\n    // move this.el to the end of the body\r\n    const body = document.querySelector('body');\r\n    body.appendChild(this.el);\r\n  }\r\n\r\n  componentDidLoad() {\r\n    // close overlay on click outside\r\n    if (!this.persistent) {\r\n      this.el.addEventListener('click', (e: MouseEvent) => {\r\n        if (this.active) {\r\n          if (e.target === this.bgEl) {\r\n            e.preventDefault();\r\n            this.close();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emitted when the overlay is opened\r\n   */\r\n  @Event({\r\n    eventName: 'overlayOpen',\r\n    cancelable: true,\r\n    bubbles: true,\r\n  })\r\n  openEvent: EventEmitter<void>;\r\n\r\n  /**\r\n   * Emitted when the overlay is closed\r\n   */\r\n  @Event({\r\n    eventName: 'overlayClose',\r\n    cancelable: true,\r\n    bubbles: true,\r\n  })\r\n  closeEvent: EventEmitter<void>;\r\n\r\n  @Method()\r\n  async close() {\r\n    this.closeEvent.emit();\r\n    enableBodyScroll(this.el);\r\n    this.active = false;\r\n    this.originator?.focus();\r\n    this.el.style.visibility = 'hidden';\r\n  }\r\n\r\n  @Method()\r\n  async open() {\r\n    this.originator = document.activeElement as HTMLElement;\r\n    this.openEvent.emit();\r\n    disableBodyScroll(this.el);\r\n    this.el.style.visibility = 'visible';\r\n    this.active = true;\r\n    // close overlay on escape\r\n    if (!this.persistent) {\r\n      document.addEventListener('keydown', (e: KeyboardEvent) => {\r\n        if (this.active) {\r\n          if (e.code === 'Escape') {\r\n            this.close();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    trapFocus(this.el);\r\n  }\r\n\r\n  @Watch('active')\r\n  watchActiveHandler(newValue: boolean): void {\r\n    if (newValue) {\r\n      this.open();\r\n      return;\r\n    }\r\n    this.close();\r\n  }\r\n\r\n  render() {\r\n    const { active, inheritedAttrs } = this;\r\n    return (\r\n      <Host class={{ active }} {...inheritedAttrs}>\r\n        <div class=\"overlay-bg\" ref={(el) => (this.bgEl = el)}></div>\r\n        <div class=\"overlay-content\">\r\n          <slot></slot>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}
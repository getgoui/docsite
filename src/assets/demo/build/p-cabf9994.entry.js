import{r as i,h as t,g as s}from"./p-797021b3.js";import{u as e}from"./p-fa247fce.js";const n="go-dropdown-menu{--dd-item-gap:0}go-dropdown-menu .dropdown-menu-inner{display:flex;flex-direction:column;gap:var(--dd-item-gap)}";const o=class{constructor(t){i(this,t);this.focusedMenuItemIndex=0;this.focusLastOnNextOpen=false;this.triggerSelector=undefined;this.isActive=false;this.width=undefined;this.menuId=undefined;this.persistent=false}async open(){if(!this.dropdownEl.isActive){this.dropdownEl.open()}}async close(i=false){this.dropdownEl.close(i)}componentWillLoad(){this.triggerEl=document.querySelector(this.triggerSelector);if(!this.menuId){this.menuId=e("go-dropdown-menu-")}this.setTriggerRoles();this.addTriggerEventListeners()}componentDidLoad(){this.addMenuItemEventListeners()}setTriggerRoles(){this.triggerEl.setAttribute("aria-controls",this.menuId)}addTriggerEventListeners(){this.triggerEl.addEventListener("click",(()=>{if(this.isActive){this.close()}else{this.open()}}));this.triggerEl.addEventListener("keydown",(i=>{if(!this.dropdownEl){return}const t=i.key;if(t==="ArrowUp"){this.focusLastOnNextOpen=true;this.open()}if(t==="ArrowDown"){this.open()}}))}addMenuItemEventListeners(){if(!this.menuItemEls){this.menuItemEls=Array.from(this.menuEl.querySelectorAll("go-dropdown-item"))}if(!this.menuItemEls.length){return}this.menuItemEls.forEach((i=>{i.addEventListener("keydown",(i=>{if(i.key==="Tab"){this.close()}if(i.key==="ArrowDown"){i.preventDefault();this.focusedMenuItemIndex+=1;if(this.focusedMenuItemIndex>this.menuItemEls.length-1){this.focusedMenuItemIndex=0}this.focusMenuItem()}if(i.key==="ArrowUp"){i.preventDefault();this.focusedMenuItemIndex-=1;if(this.focusedMenuItemIndex<0){this.focusedMenuItemIndex=this.menuItemEls.length-1}this.focusMenuItem()}}))}))}focusMenuItem(){this.menuItemEls.forEach(((i,t)=>{if(t===this.focusedMenuItemIndex){i.focusInControl()}else{i.focusOutControl()}}))}handleDropdownOpened(){this.isActive=true;if(this.focusLastOnNextOpen){this.focusedMenuItemIndex=this.menuItemEls.length-1;this.focusLastOnNextOpen=false}else{this.focusedMenuItemIndex=0}this.focusMenuItem()}handleDropdownClosed(){this.isActive=false}handleItemSelected(){if(!this.persistent){this.close()}}render(){const{triggerSelector:i,isActive:s,width:e,menuId:n}=this;const o={triggerSelector:i,isActive:s,width:e};return t("go-dropdown",Object.assign({ref:i=>{this.dropdownEl=i},noTriggerClickHandler:true,onOpened:()=>this.handleDropdownOpened(),onClosed:()=>this.handleDropdownClosed()},o),t("div",{role:"menu",class:"dropdown-menu-inner",id:n,ref:i=>{this.menuEl=i}},t("slot",null)))}get el(){return s(this)}};o.style=n;export{o as go_dropdown_menu};
//# sourceMappingURL=p-cabf9994.entry.js.map